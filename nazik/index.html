<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Bir S√ºrprizim Var...</title>
    <style>
        /* FONT KORUNDU */
        @import url('https://fonts.cdnfonts.com/css/super-malibu');
        
        /* TEMA (LAVANTA/MOR) - Romantik olduƒüu i√ßin korundu */
        
        body {
            font-family: 'Super Malibu', sans-serif;
            background-color: #e6e0f7;  
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><path fill="%23d0c0f0" d="M50 0 C75 25 75 75 50 100 C25 75 25 25 50 0z" /><path fill="%23d0c0f0" d="M0 50 C25 25 75 25 100 50 C75 75 25 75 0 50z" /></svg>'); 
            background-size: 80px 80px;
            color: #4a2c3c;  
            text-align: center;
            padding: 20px;
            overflow-x: hidden; 
            line-height: 1.6; 
        }
        
        /* Mektup kutusu */
        .container {
            max-width: 650px;  
            margin: 40px auto;
            padding: 30px 40px;  
            background-color: #fffaf0; 
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);  
            position: relative;
            border: 2px solid #c0b0dd;  
            box-sizing: border-box; 
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUM+o4AAAACHRSTlMA/////////9kdXYcAAAASdEVYdFNvZnR3YXJlPUxpbmVhcml0eSBQYXR0ZXJucyBTdHVkaW9iZUy3hGAAAAAVSURBVDjLY2AYBGCAAhjECwIApAAGA3wL8/UAAAAASUVORK5CYII=');
            opacity: 0.05;
            pointer-events: none;
            border-radius: 15px;
        }

        .step { display: none; }
        .active { display: block; }

        h1 {
            font-family: 'Super Malibu', sans-serif;
            font-weight: normal; 
            color: #6a4a8c;  
            font-size: 2.8em; 
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .container p {
            font-family: 'Super Malibu', sans-serif;
            font-size: 1.3em; 
            margin-bottom: 15px;
            color: #5a3c4c; 
        }
        
        button {
            padding: 14px 30px;
            background-color: #9b7fbc;  
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            font-size: 1.1em;  
            font-family: 'Super Malibu', sans-serif; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        button:hover {
            background-color: #8468a3; 
            transform: scale(1.03);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: scale(1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        /* Durdurma Butonu Stili */
        #btn-make-guess {
            background-color: #dc3545; /* Kƒ±rmƒ±zƒ± */
            box-shadow: 0 4px 10px rgba(100,0,0,0.2);
            margin-top: 20px; /* Altta olduƒüu i√ßin bo≈üluk ver */
        }
        #btn-make-guess:hover {
            background-color: #c82333; /* Koyu Kƒ±rmƒ±zƒ± */
        }
        #btn-make-guess:disabled {
            background-color: #cccccc;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* YENƒ∞: NAZƒ∞K harfleri ve kalp animasyonu */
        .heart {
            position: fixed;
            top: -10vh;
            left: 50%;
            font-size: 2.5rem;  
            animation: fall 5s linear forwards;
            opacity: 0.9;
            font-weight: bold;
            color: #b388dd; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            z-index: 1000; 
        }
        @keyframes fall {
            to { transform: translateY(105vh) rotate(360deg); opacity: 0; }
        }
        
        /* Vƒ∞DEO IFRAME STƒ∞Lƒ∞ */
        #video-player-iframe {
            width: 100%; 
            max-width: 560px; 
            height: 315px; 
            margin-top: 30px;  
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #d4a7b7;
        }

        /* √ái√ßek s√ºslemeleri */
        .decoration-top-left, .decoration-top-right,
        .decoration-bottom-left, .decoration-bottom-right {
            position: absolute;
            font-size: 2.5em;
            opacity: 0.8;
            pointer-events: none;
            color: #b388dd; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .decoration-top-left { top: 15px; left: 15px; transform: rotate(-15deg); }
        .decoration-top-right { top: 15px; right: 15px; transform: rotate(15deg); }
        .decoration-bottom-left { bottom: 15px; left: 15px; transform: rotate(15deg); }
        .decoration-bottom-right { bottom: 15px; right: 15px; transform: rotate(-15deg); }

        /* YENƒ∞: ƒ∞mza */
        .signature {
            font-family: 'Super Malibu', sans-serif;
            font-style: normal; 
            font-size: 1.8em; 
            margin-top: 30px;
            color: #6a4a8c; 
            text-align: right;
            padding-right: 20px;
        }

        /* --- KELƒ∞ME OYUNU STƒ∞LLERƒ∞ --- */
        
        #game-stats {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #fdf6f8;
            border: 1px dashed #d4a7b7;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px; 
            font-family: 'Helvetica', sans-serif; 
            flex-wrap: wrap; 
        }
        #game-stats div {
            font-size: 1.2em;
            color: #6a4a8c;
            font-weight: bold;
            padding: 5px 10px;
        }
        #game-stats span {
            font-size: 1.5em;
            color: #333;
            display: block;
            font-weight: 900;
        }
        #main-timer { color: #b33951; } 

        /* G√∂rsel Zaman ≈ûeridi */
        #visual-timer-container {
            width: 100%;
            height: 12px;
            background-color: #fcf6f8;
            border: 1px solid #c0b0dd;
            border-radius: 6px;
            overflow: hidden;
            margin: 5px 10px 15px 10px; 
            flex-basis: 100%; 
        }
        #visual-timer-bar {
            height: 100%;
            width: 100%; 
            background-color: #28a745; /* Ye≈üil */
            border-radius: 6px;
            transition: width 1s linear, background-color 0.5s linear;
        }

        #question-hint {
            font-size: 1.1em;
            color: #7a5c6c; 
            font-style: italic;
            margin: 15px auto;
            padding: 10px 15px;
            background-color: #fdf6f8; 
            border: 1px dashed #d4a7b7;
            border-radius: 8px;
            max-width: 90%;
            line-height: 1.5;
            min-height: 3em; 
        }
        
        #word-display {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 25px 0;
            flex-wrap: nowrap; 
        }
        
        .letter-box {
            width: 50px;
            height: 50px;
            border: 2px solid #c0b0dd;
            border-radius: 5px;
            background-color: #fcf6f8;
            font-size: 2em; 
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a2c3c;
            font-family: sans-serif; 
            transition: all 0.3s ease;
            flex-shrink: 1; 
            flex-basis: 50px; 
        }
        
        /* Uzun kelime sƒ±nƒ±fƒ± (B√úY√úLEYƒ∞Cƒ∞ 10) */
        .word-display-long .letter-box {
            width: 40px;
            height: 40px;
            font-size: 1.5em;
            flex-basis: 40px;
            gap: 3px; /* Daha da sƒ±ƒüdƒ±rmak i√ßin */
        }
        
        .letter-box.revealed {
            background-color: #fffaf0;
            border-color: #9b7fbc;
            transform: scale(1.05);
        }

        /* Hƒ±zlƒ± Tahmin Alanƒ± Stili */
        #quick-guess-area {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px dashed #c0b0dd;
        }
        #quick-guess-area h3 {
             font-family: 'Helvetica', sans-serif; 
             color: #6a4a8c;
             margin-top: 0;
             margin-bottom: 10px;
        }
        #quick-guess-attempts {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.1em;
            font-weight: bold;
            color: #6a4a8c;
            margin-bottom: 10px;
        }
        
        /* "Durdurulmu≈ü" Tahmin Alanƒ± Stili */
        #guess-area {
            margin-top: 20px;
            padding: 15px;
            background-color: #fdf6f8;
            border: 1px solid #d4a7b7;
            border-radius: 8px;
        }
        
        #guess-timer {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            color: #b33951;
            margin-bottom: 10px;
        }
        
        #guess-attempts {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.1em;
            font-weight: bold;
            color: #6a4a8c;
            margin-bottom: 10px;
        }
        
        input[type="text"] { /* Her iki inputu da hedefle */
            padding: 12px;
            width: 80%;
            max-width: 300px; 
            border-radius: 8px;
            border: 1px solid #d4a7b7;
            background-color: #fcf6f8;
            color: #4a2c3c;
            margin-bottom: 10px;
            font-size: 1.2em; 
            font-family: 'Helvetica', sans-serif; 
            text-transform: uppercase; 
            text-align: center;
        }
        
        .feedback {
            font-family: 'Helvetica', sans-serif;
            font-weight: bold;
            min-height: 1.2em;
            margin-top: 10px;
        }
        .feedback-correct { color: #28a745; }
        .feedback-wrong { color: #dc3545; }

        #final-score-summary {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            color: #6a4a8c;
            margin: 30px 0;
            line-height: 1.5; 
        }
        
    </style>
</head>
<body>

    <div id="step-1" class="container step active">
        <div class="decoration-top-left">üåπ</div>
        <div class="decoration-top-right">üå∏</div>
        
        <h1>Kelime Oyunu</h1>
        
        <div id="game-stats">
            <div>Ana S√ºre
                <span id="main-timer">03:00</span>
            </div>
            <div>Puan
                <span id="game-score">0</span>
            </div>
            <div id="visual-timer-container">
                <div id="visual-timer-bar"></div>
            </div>
        </div>
        
        <div id="question-hint">ƒ∞pucu y√ºkleniyor...</div>
        
        <button id="btn-get-letter">Harf Al</button>
        
        <div id="word-display">
            </div>
        
        <button id="btn-make-guess">Durdur ve Tahmin Et</button>
        
        <div id="quick-guess-area">
            <h3>Hƒ±zlƒ± Tahmin</h3>
            <div id="quick-guess-attempts">Kalan Hak: 3</div>
            <input type="text" id="quick-guess-input" placeholder="Hƒ±zlƒ± Tahmin...">
            <br>
            <button id="btn-quick-guess">Onayla (Hƒ±zlƒ±)</button>
            <div id="quick-guess-feedback" class="feedback"></div>
        </div>
        
        <div id="guess-area" style="display: none;">
            <div id="guess-timer">Kalan Tahmin S√ºresi: 01:00</div>
            <div id="guess-attempts">Kalan Hak: 3</div>
            <input type="text" id="guess-input" placeholder="Tahmininizi Yazƒ±n...">
            <br>
            <button id="btn-submit-guess">Onayla</button>
            <div id="guess-feedback" class="feedback"></div>
        </div>
        
        <div id="final-score-summary" style="display: none;">
            Oyun Bitti! Toplam Puanƒ±nƒ±z: 0
        </div>

    </div>

    <div id="step-3" class="container step">
        <div class="decoration-top-left">üåπ‚ù§Ô∏è</div>
        <div class="decoration-top-right">üíñüå∏</div>
        <div class="decoration-bottom-left">üå∑üíï</div>
        <div class="decoration-bottom-right">üíìüåº</div>

        <h1>Benim G√ºzel Sevgilim</h1>
        <p>Bana ellerini ver</p>
        <p>Hayat seni sevince g√ºzel</p>
        <p>Yoluna adadƒ±m √∂mr√ºm√º ben</p>
        <p>Gel ka√ßma g√ºzel</p>
        <p>Seninle u√ßarƒ±m, seninle ben</p>
        <p>Seninle bir b√ºt√ºn√ºm ben</p>
        <p>Bana ellerini ver</p>
        <p>Hayat seni sevince g√ºzel...</p>
        
        <div class="signature">
             Canƒ±m Sevgilim
        </div>

        <iframe 
            id="video-player-iframe" 
            src="https://www.youtube.com/embed/kGgYgO1d-aI" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
        </iframe>
    </div>


    <script>
        // --- YENƒ∞ SORU Lƒ∞STESƒ∞ (NAZƒ∞K ƒ∞√áƒ∞N) ---
        const questions = [
            { word: "NAZƒ∞K", hint: "Zarif, ince, kibar davranƒ±≈ülƒ±." },
            { word: "B√úY√úLEYƒ∞Cƒ∞", hint: "G√∂z dolduran, √ßok etkileyici, insanƒ± alƒ±p g√∂t√ºren." },
            { word: "G√úZELLƒ∞K", hint: "Zarafet, estetik bir haz uyandƒ±ran nitelik." }
        ];

        // --- Oyun Deƒüi≈ükenleri ---
        let currentQuestionIndex = 0;
        let totalScore = 0;
        let mainTimer = 180; // 3 Dakika
        let guessTimer = 60; // 1 Dakika
        let mainTimerInterval = null;
        let guessTimerInterval = null;
        let revealedLetters = []; 
        let isGuessingPhase = false; // "Durdurulmu≈ü" tahmin modu
        let quickGuessAttempts = 3; 
        let stoppedGuessAttempts = 3; 

        // --- HTML Elementleri ---
        const mainTimerEl = document.getElementById('main-timer');
        const visualTimerBarEl = document.getElementById('visual-timer-bar'); 
        const gameScoreEl = document.getElementById('game-score');
        const questionHintEl = document.getElementById('question-hint');
        const wordDisplayEl = document.getElementById('word-display');
        const btnGetLetter = document.getElementById('btn-get-letter');
        const btnMakeGuess = document.getElementById('btn-make-guess');
        
        // Durdurulmu≈ü Tahmin Alanƒ±
        const guessAreaEl = document.getElementById('guess-area');
        const guessTimerEl = document.getElementById('guess-timer');
        const guessAttemptsEl = document.getElementById('guess-attempts'); 
        const guessInputEl = document.getElementById('guess-input');
        const btnSubmitGuess = document.getElementById('btn-submit-guess');
        const guessFeedbackEl = document.getElementById('guess-feedback');
        
        // Hƒ±zlƒ± Tahmin Alanƒ±
        const quickGuessAreaEl = document.getElementById('quick-guess-area');
        const quickGuessAttemptsEl = document.getElementById('quick-guess-attempts');
        const quickGuessInputEl = document.getElementById('quick-guess-input');
        const btnQuickGuess = document.getElementById('btn-quick-guess');
        const quickGuessFeedbackEl = document.getElementById('quick-guess-feedback');

        const finalScoreSummaryEl = document.getElementById('final-score-summary');

        // --- Zamanlayƒ±cƒ± Formatlama ---
        function formatTime(seconds) {
            const min = Math.floor(seconds / 60).toString().padStart(2, '0');
            const sec = (seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }
        
        // Ana Zamanlayƒ±cƒ± Aray√ºz G√ºncelleme
        function updateMainTimerUI() {
            // Metni g√ºncelle
            mainTimerEl.textContent = formatTime(mainTimer);
            
            // G√∂rsel ≈üeridi g√ºncelle
            const totalTime = 180; // 3 dakika
            const percentage = (mainTimer / totalTime) * 100;
            visualTimerBarEl.style.width = percentage + '%';
            
            // Rengi g√ºncelle
            if (percentage < 20) {
                visualTimerBarEl.style.backgroundColor = '#dc3545'; // Kƒ±rmƒ±zƒ±
            } else if (percentage < 50) {
                visualTimerBarEl.style.backgroundColor = '#f7b538'; // Sarƒ±
            } else {
                visualTimerBarEl.style.backgroundColor = '#28a745'; // Ye≈üil
            }
        }

        // --- Ana Oyunu Ba≈ülatma ---
        function initGame() {
            currentQuestionIndex = 0;
            totalScore = 0;
            mainTimer = 180;
            isGuessingPhase = false;
            
            gameScoreEl.textContent = totalScore;
            updateMainTimerUI(); 
            
            loadQuestion(currentQuestionIndex);
            startMainTimer();

            // Buton Olaylarƒ±
            btnGetLetter.onclick = handleGetLetter;
            btnMakeGuess.onclick = handleMakeGuess;
            btnSubmitGuess.onclick = handleSubmitGuess;
            btnQuickGuess.onclick = handleSubmitQuickGuess; 
            
            // Enter tu≈üu ile tahmin onayƒ± (Her iki input i√ßin)
            guessInputEl.addEventListener('keyup', (e) => {
                if (e.key === 'Enter' && isGuessingPhase) handleSubmitGuess();
            });
            quickGuessInputEl.addEventListener('keyup', (e) => {
                if (e.key === 'Enter' && !isGuessingPhase) handleSubmitQuickGuess();
            });
        }

        // --- Soru Y√ºkleme ---
        function loadQuestion(index) {
            if (index >= questions.length) {
                endGame(true); // T√ºm sorular bitti
                return;
            }

            const question = questions[index];
            questionHintEl.textContent = question.hint;
            
            wordDisplayEl.innerHTML = '';
            revealedLetters = [];
            
            // Sƒ±nƒ±f adƒ± 8 harften uzunsa (√∂rn: B√úY√úLEYƒ∞Cƒ∞)
            if (question.word.length > 7) { 
                wordDisplayEl.className = 'word-display-long';
            } else {
                wordDisplayEl.className = '';
            }

            for (let i = 0; i < question.word.length; i++) {
                wordDisplayEl.innerHTML += `<div class="letter-box" data-index="${i}">_</div>`;
                revealedLetters.push(false); 
            }
            
            // Aray√ºz√º sƒ±fƒ±rla
            isGuessingPhase = false;
            btnGetLetter.disabled = false;
            btnMakeGuess.disabled = false;
            
            // Hƒ±zlƒ± tahmin alanƒ±nƒ± sƒ±fƒ±rla ve g√∂ster
            quickGuessAttempts = 3;
            quickGuessAttemptsEl.textContent = `Kalan Hak: ${quickGuessAttempts}`;
            quickGuessAreaEl.style.display = 'block';
            quickGuessFeedbackEl.textContent = '';
            quickGuessInputEl.value = '';
            quickGuessInputEl.disabled = false;
            btnQuickGuess.disabled = false;
            
            // Durdurulmu≈ü tahmin alanƒ±nƒ± gizle
            guessAreaEl.style.display = 'none';
        }

        // --- Ana S√ºre√ß ---
        function startMainTimer() {
            if (mainTimerInterval) clearInterval(mainTimerInterval);
            mainTimerInterval = setInterval(() => {
                if (isGuessingPhase) return; 
                mainTimer--;
                updateMainTimerUI(); 
                if (mainTimer <= 0) {
                    endGame(false); // Ana s√ºre doldu
                }
            }, 1000);
        }

        function pauseMainTimer() {
            if (mainTimerInterval) clearInterval(mainTimerInterval);
        }

        // --- Oynanƒ±≈ü Fonksiyonlarƒ± ---

        // "AKILLI HARF AL" FONKSƒ∞YONU
        function handleGetLetter() {
            const question = questions[currentQuestionIndex];
            const wordLength = question.word.length;

            const unrevealedIndices = [];
            for (let i = 0; i < wordLength; i++) {
                if (revealedLetters[i] === false) {
                    unrevealedIndices.push(i);
                }
            }

            if (unrevealedIndices.length === 0) {
                btnGetLetter.disabled = true;
                return; 
            }

            // Biti≈üik olmayan harfleri tercih et (daha zorlayƒ±cƒ±)
            const idealChoices = unrevealedIndices.filter(index => {
                const isAdjacentLeft = (index > 0) && (revealedLetters[index - 1] === true);
                const isAdjacentRight = (index < wordLength - 1) && (revealedLetters[index + 1] === true);
                return !isAdjacentLeft && !isAdjacentRight;
            });
            
            // ƒ∞lk harf olmayanlarƒ± daha √ßok tercih et
            const nonFirstIdealChoices = idealChoices.filter(index => index !== 0);

            let chosenIndex;

            if (nonFirstIdealChoices.length > 0) {
                chosenIndex = nonFirstIdealChoices[Math.floor(Math.random() * nonFirstIdealChoices.length)];
            } else if (idealChoices.length > 0) {
                chosenIndex = idealChoices[0]; 
            } else {
                // Hepsi biti≈üikse rastgele se√ß
                chosenIndex = unrevealedIndices[Math.floor(Math.random() * unrevealedIndices.length)];
            }

            revealedLetters[chosenIndex] = true; 
            const box = wordDisplayEl.querySelector(`.letter-box[data-index="${chosenIndex}"]`);
            box.textContent = question.word[chosenIndex];
            box.classList.add('revealed');
            
            // Son harf kaldƒ±ysa, oyunu bitir (harf almayƒ± bekletme)
            if (unrevealedIndices.length === 1) { 
                btnGetLetter.disabled = true;
                setTimeout(() => {
                    handleGuessResult(false, true); // Bilemedi varsay
                }, 1000);
            }
        }

        // "Durdur ve Tahmin Et" Butonu
        function handleMakeGuess() {
            isGuessingPhase = true; 
            pauseMainTimer();
            
            btnGetLetter.disabled = true;
            btnMakeGuess.disabled = true;
            quickGuessAreaEl.style.display = 'none';
            
            guessAreaEl.style.display = 'block';
            guessInputEl.value = '';
            guessInputEl.focus();
            guessFeedbackEl.textContent = '';
            
            stoppedGuessAttempts = 3; 
            guessTimer = 60; 
            guessAttemptsEl.textContent = `Kalan Hak: ${stoppedGuessAttempts}`;
            
            startGuessTimer();
        }
        
        // "Hƒ±zlƒ± Tahmin" Onay Butonu
        function handleSubmitQuickGuess() {
            if (mainTimer <= 0 || quickGuessAttempts <= 0) return;

            const guess = quickGuessInputEl.value.toLocaleUpperCase('tr-TR').trim();
            const correctWord = questions[currentQuestionIndex].word;

            if (guess === correctWord) {
                pauseMainTimer(); 
                handleGuessResult(true, false); 
            } else {
                // Yanlƒ±≈ü tahmin (Hƒ±zlƒ±) - PUAN Sƒ∞LME YOK
                quickGuessAttempts--;
                quickGuessAttemptsEl.textContent = `Kalan Hak: ${quickGuessAttempts}`;
                
                if (quickGuessAttempts <= 0) {
                    quickGuessFeedbackEl.textContent = "Yanlƒ±≈ü! Hƒ±zlƒ± tahmin hakkƒ±nƒ±z bitti.";
                    quickGuessFeedbackEl.style.color = "#dc3545";
                    quickGuessInputEl.disabled = true;
                    btnQuickGuess.disabled = true;
                } else {
                    quickGuessFeedbackEl.textContent = "Yanlƒ±≈ü! Tekrar deneyin.";
                    quickGuessFeedbackEl.style.color = "#dc3545";
                }
            }
             quickGuessInputEl.value = ''; 
        }


        // "Durdurulmu≈ü Tahmin" Zamanlayƒ±cƒ±sƒ±
        function startGuessTimer() {
            guessTimerEl.textContent = `Kalan Tahmin S√ºresi: 0${formatTime(guessTimer)}`;
            
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            guessTimerInterval = setInterval(() => {
                guessTimer--;
                guessTimerEl.textContent = `Kalan Tahmin S√ºresi: 0${formatTime(guessTimer)}`;
                if (guessTimer <= 0) {
                    guessFeedbackEl.textContent = "S√ºre Doldu! Hakkƒ±nƒ±z bitti.";
                    guessFeedbackEl.style.color = "#dc3545";
                    setTimeout(() => handleGuessResult(false, false), 1500); 
                }
            }, 1000);
        }

        // "Durdurulmu≈ü Tahmin" Onay Butonu
        function handleSubmitGuess() {
            if (guessTimer <= 0 || stoppedGuessAttempts <= 0) return; 

            const guess = guessInputEl.value.toLocaleUpperCase('tr-TR').trim();
            const correctWord = questions[currentQuestionIndex].word;

            if (guess === correctWord) {
                handleGuessResult(true, false); 
            } else {
                // Yanlƒ±≈ü tahmin (Durdurulmu≈ü) - PUAN Sƒ∞LME YOK
                stoppedGuessAttempts--;
                guessAttemptsEl.textContent = `Kalan Hak: ${stoppedGuessAttempts}`;
                
                if (stoppedGuessAttempts <= 0) {
                    guessFeedbackEl.textContent = "Yanlƒ±≈ü! Hakkƒ±nƒ±z bitti.";
                    guessFeedbackEl.style.color = "#dc3545";
                    setTimeout(() => handleGuessResult(false, false), 1500); 
                } else {
                    guessFeedbackEl.textContent = "Yanlƒ±≈ü! Tekrar deneyin.";
                    guessFeedbackEl.style.color = "#dc3545";
                }
            }
            guessInputEl.value = ''; 
        }

        // --- Sonu√ß ve Ge√ßi≈ü ---
        
        function handleGuessResult(isCorrect, isAutoAdvance) {
            pauseMainTimer();
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            isGuessingPhase = true; 
            
            if (isCorrect) {
                // Puan Hesapla (A√ßƒ±lmayan her harf 10 puan)
                let pointsEarned = 0;
                for (let i = 0; i < revealedLetters.length; i++) {
                    if (revealedLetters[i] === false) {
                        pointsEarned += 10;
                    }
                }
                totalScore += pointsEarned;
                gameScoreEl.textContent = totalScore;
                
                // Kelimeyi g√∂ster (doƒüru bildi)
                const boxes = wordDisplayEl.querySelectorAll('.letter-box');
                const word = questions[currentQuestionIndex].word;
                boxes.forEach((box, i) => {
                    box.textContent = word[i];
                    box.classList.add('revealed');
                });
            }
            
            // 1.5 saniye sonra sonraki soruya ge√ß
            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex); // Bu isGuessingPhase'i false yapar
                if (mainTimer > 0) startMainTimer(); 
            }, 1500);
        }

        // --- Oyun Biti≈üi ---
        function endGame(isFinished) { 
            pauseMainTimer();
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            isGuessingPhase = true; // Oyunu kalƒ±cƒ± olarak kilitle
            
            // Butonlarƒ± ve giri≈üleri inaktif yap
            btnGetLetter.disabled = true;
            btnMakeGuess.disabled = true;
            btnQuickGuess.disabled = true;
            btnSubmitGuess.disabled = true; // Durdurulmu≈ü alandaki
            quickGuessInputEl.disabled = true;
            guessInputEl.disabled = true;

            // Tahmin alanlarƒ±nƒ± gizle
            guessAreaEl.style.display = 'none';
            quickGuessAreaEl.style.display = 'none'; 
            
            // Final skoru ve KALAN S√úRE
            finalScoreSummaryEl.innerHTML = `Oyun Bitti! <br> Toplam Puanƒ±nƒ±z: ${totalScore} <br> Kalan S√ºreniz: ${formatTime(mainTimer)}`;
            finalScoreSummaryEl.style.display = 'block';

            setTimeout(() => {
                showFinalStep(); // Step-3'√º (≈üiir/video) g√∂ster
            }, 3000); // 3 saniye bekle
        }

        // --- S√ºrpriz Adƒ±m Fonksiyonlarƒ± ---

        // Aktif adƒ±mƒ± g√∂steren fonksiyon
        function showStep(stepId) {
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById(stepId).classList.add('active');
        }

        // Final adƒ±mƒ±nƒ± g√∂ster ve kalpleri/harfleri ba≈ülat
        function showFinalStep() {
            showStep('step-3'); // Adƒ±m 3'√º (Mektup) g√∂ster
            setInterval(createHeart, 200);
        }

        // YENƒ∞: Kalp/Harf ("NAZƒ∞K") olu≈üturma fonksiyonu
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
            heart.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
            
            // YENƒ∞ HARFLER
            const heartIcons = ['‚ù§Ô∏è', 'N', 'üíó', 'A', 'üíì','Z', 'üíñ', 'ƒ∞', 'üíï', 'K'];
            heart.innerText = heartIcons[Math.floor(Math.random() * heartIcons.length)];
            
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 5000);
        }
        
        // --- OYUNU BA≈ûLAT ---
        initGame();
        
    </script>

</body>
</html>
