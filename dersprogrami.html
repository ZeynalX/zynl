<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6. Sınıf İnteraktif Haftalık Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            height: auto;
            min-height: 300px;
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .nav-btn {
            @apply px-3 py-2 sm:px-4 rounded-lg text-sm sm:text-base font-semibold transition-all duration-200 shadow-sm;
        }
        .nav-btn-active {
            @apply bg-blue-600 text-white shadow-lg scale-105;
        }
        .nav-btn-inactive {
            @apply bg-blue-50 text-blue-800 hover:bg-blue-100 hover:shadow-md;
        }
        
        @media print {
            @page {
                size: A4 landscape;
                margin: 0.7cm;
            }
            body {
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
                font-size: 11pt;
            }
            #current-activity-bar, header, nav, #print-schedule-btn, #chart-section, #plan-view {
                display: none !important;
            }
            #full-week-view {
                display: block !important;
                width: 100%;
                box-shadow: none !important;
                border: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            #full-week-view h2 {
                text-align: center;
                font-size: 16pt;
                font-weight: bold;
                margin-bottom: 10px;
            }
            #full-week-view table {
                width: 100%;
                font-size: 10pt;
                line-height: 1.3;
                border-collapse: collapse;
                table-layout: fixed; 
            }
            #full-week-view th, #full-week-view td {
                border: 1px solid #999;
                padding: 5px;
                text-align: left;
                vertical-align: top;
                white-space: normal;
                word-break: break-word;
                min-height: 45px; 
                height: 45px;
            }
            #full-week-view th {
                background-color: #f3f4f6 !important;
                font-weight: bold;
                font-size: 11pt;
                text-align: center;
            }
            .bg-blue-50 {
                background-color: #EFF6FF !important;
            }
            
            #full-week-tbody .text-lg {
                font-size: 1.1rem;
                margin-right: 4px;
            }
            #full-week-tbody .text-xs {
                font-size: 9pt;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 text-slate-800">

    
    <div id="current-activity-bar" class="bg-gray-800 text-white p-3 shadow-lg print:hidden sticky top-0 z-50">
        <div class="container mx-auto max-w-7xl">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-4 text-center">
                
                <div class="md:text-right">
                    <span class="text-xs uppercase text-gray-400">Önceki</span>
                    <p id="prev-activity" class="font-medium text-sm sm:text-base">--</p>
                </div>
                
                <div class="border-t border-b border-gray-700 md:border-0 md:border-l md:border-r md:border-gray-600 py-2 md:py-0">
                    <span class="text-xs uppercase text-blue-300">Şu Anki Aktivite</span>
                    <p id="current-activity" class="font-bold text-base sm:text-lg text-blue-300">Yükleniyor...</p>
                </div>
                
                <div class="md:text-left">
                    <span class="text-xs uppercase text-gray-400">Sonraki</span>
                    <p id="next-activity" class="font-medium text-sm sm:text-base">--</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container mx-auto max-w-7xl p-4 sm:p-6 lg:p-8">
        
        <header class="mb-6 print:hidden">
            <h1 class="text-xl font-semibold text-blue-800">6. Sınıf İnteraktif Haftalık Planım</h1>
        </header>

        
        <nav class="mb-6 bg-white p-3 rounded-xl shadow-sm print:hidden">
            <div class="flex flex-wrap justify-center gap-2">
                <button id="btn-Pazartesi" class="nav-btn nav-btn-inactive">Pazartesi</button>
                <button id="btn-Salı" class="nav-btn nav-btn-inactive">Salı</button>
                <button id="btn-Çarşamba" class="nav-btn nav-btn-inactive">Çarşamba</button>
                <button id="btn-Perşembe" class="nav-btn nav-btn-inactive">Perşembe</button>
                <button id="btn-Cuma" class="nav-btn nav-btn-inactive">Cuma</button>
                <button id="btn-Cumartesi" class="nav-btn nav-btn-inactive">Cumartesi</button>
                <button id="btn-Pazar" class="nav-btn nav-btn-inactive">Pazar</button>
                <button id="btn-FullWeek" class="nav-btn nav-btn-inactive border border-blue-600">Tüm Hafta</button>
            </div>
        </nav>

        
        <main class="flex flex-col gap-8">
            
            <section id="program-section">
                <div id="plan-view" class="bg-white p-4 sm:p-6 rounded-lg shadow-md print:hidden">
                    <h2 id="plan-title" class="text-2xl font-semibold text-slate-700 mb-4"></h2>
                    <div id="plan-container" class="space-y-3">
                    </div>
                </div>

                <div id="full-week-view" class="bg-white p-4 sm:p-6 rounded-lg shadow-md hidden print:block overflow-x-auto">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-semibold text-slate-700">Tüm Haftalık Plan</h2>
                        <button id="print-schedule-btn" class="print:hidden px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition-colors">
                            Yazdır (A4 Yatay)
                        </button>
                    </div>
                    <table class="min-w-full divide-y divide-gray-200 border">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Pazartesi</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Salı</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Çarşamba</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Perşembe</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Cuma</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Cumartesi</th>
                                <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">Pazar</th>
                            </tr>
                        </thead>
                        <tbody id="full-week-tbody" class="bg-white divide-y divide-gray-200 text-sm">
                            
                        </tbody>
                    </table>
                </div>
            </section>

            
            <section id="chart-section" class="bg-white p-4 sm:p-6 rounded-lg shadow-md print:hidden">
                <h3 class="text-xl font-semibold text-slate-700 mb-4 text-center">Haftalık Zaman Dağılımı</h3>
                <div class="chart-container">
                    <canvas id="time-allocation-chart"></canvas>
                </div>
            </section>

        </main>
    </div>

    <script>
        
        const scheduleData = {
            "Pazartesi": [
                { time: "08.00 - 14.40", activity: "OKUL" },
                { time: "14.40 - 15.30", activity: "Eve Dönüş & Dinlenme" },
                { time: "15.30 - 16.30", activity: "Sosyal Zaman / Arkadaşlar" },
                { time: "16.30 - 17.30", activity: "Ders 1: Ödevler" },
                { time: "17.30 - 18.30", activity: "Mola / Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ders 2: Soru Çözme" },
                { time: "20.10 - 20.50", activity: "Ders 3: Konu Tekrarı" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Salı": [
                { time: "08.00 - 14.40", activity: "OKUL" },
                { time: "14.40 - 15.30", activity: "Eve Dönüş & Dinlenme" },
                { time: "15.30 - 16.30", activity: "Sosyal Zaman / Arkadaşlar" },
                { time: "16.30 - 17.30", activity: "Ders 1: Ödevler" },
                { time: "17.30 - 18.30", activity: "Mola / Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ders 2: Soru Çözme" },
                { time: "20.10 - 20.50", activity: "Ders 3: Konu Tekrarı" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Çarşamba": [
                { time: "08.00 - 14.40", activity: "OKUL" },
                { time: "14.40 - 15.30", activity: "Eve Dönüş & Dinlenme" },
                { time: "15.30 - 16.30", activity: "Sosyal Zaman / Arkadaşlar" },
                { time: "16.30 - 17.30", activity: "Ders 1: Ödevler" },
                { time: "17.30 - 18.30", activity: "Mola / Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ders 2: Soru Çözme" },
                { time: "20.10 - 20.50", activity: "Ders 3: Konu Tekrarı" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Perşembe": [
                { time: "08.00 - 14.40", activity: "OKUL" },
                { time: "14.40 - 15.30", activity: "Eve Dönüş & Dinlenme" },
                { time: "15.30 - 16.30", activity: "Sosyal Zaman / Arkadaşlar" },
                { time: "16.30 - 17.30", activity: "Ders 1: Ödevler" },
                { time: "17.30 - 18.30", activity: "Mola / Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ders 2: Soru Çözme" },
                { time: "20.10 - 20.50", activity: "Ders 3: Konu Tekrarı" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Cuma": [
                { time: "08.00 - 14.40", activity: "OKUL" },
                { time: "14.40 - 15.30", activity: "Eve Dönüş & Dinlenme" },
                { time: "15.30 - 16.30", activity: "Sosyal Zaman / Arkadaşlar" },
                { time: "16.30 - 17.30", activity: "Ders 1: Ödevler" },
                { time: "17.30 - 18.30", activity: "Mola / Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ders 2: Soru Çözme" },
                { time: "20.10 - 20.50", activity: "Ders 3: Konu Tekrarı" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Cumartesi": [
                { time: "07.30 - 14.40", activity: "Esnek Zaman" },
                { time: "14.40 - 15.30", activity: "Öğle Yemeği" },
                { time: "15.30 - 16.30", activity: "Haftalık Tekrar" },
                { time: "16.30 - 17.30", activity: "Sosyal Zaman / Hobi" },
                { time: "17.30 - 18.30", activity: "Hobi / Serbest Zaman" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ekran Süresi" },
                { time: "20.10 - 20.50", activity: "Ekran Süresi" },
                { time: "20.50 - 21.00", activity: "Serbest Zaman" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ],
            "Pazar": [
                { time: "07.30 - 14.40", activity: "Esnek Zaman" },
                { time: "14.40 - 15.30", activity: "Öğle Yemeği" },
                { time: "15.30 - 16.30", activity: "Haftalık Tekrar" },
                { time: "16.30 - 17.30", activity: "Aile Aktivitesi" },
                { time: "17.30 - 18.30", activity: "Aile Zamanı" },
                { time: "18.30 - 19.30", activity: "Akşam Yemeği" },
                { time: "19.30 - 20.10", activity: "Ekran Süresi" },
                { time: "20.10 - 20.50", activity: "Ekran Süresi" },
                { time: "20.50 - 21.00", activity: "Haftaya Hazırlık" },
                { time: "21.00 - 21.30", activity: "Uyku Hazırlığı" },
                { time: "21.30 - 22.00", activity: "Kitap Okuma" },
                { time: "22.00", activity: "UYKU" }
            ]
        };

        
        const dayNames = ["Pazar", "Pazartesi", "Salı", "Çarşamba", "Perşembe", "Cuma", "Cumartesi"];
        let activeDayButton = null;

        
        function getActivityIcon(activity) {
            if (activity.includes('OKUL')) return '🏫';
            if (activity.includes('Eve Dönüş') || activity.includes('Dinlenme')) return '🏠';
            if (activity.includes('Arkadaşlar') || activity.includes('Sosyal')) return '👫';
            if (activity.includes('Ödevler')) return '✍️';
            if (activity.includes('Aile')) return '👨‍👩‍👧‍👦';
            if (activity.includes('Yemeği')) return '🍽️';
            if (activity.includes('Soru Çözme')) return '❓';
            if (activity.includes('Konu Tekrarı') || activity.includes('Haftalık Tekrar')) return '📚';
            if (activity.includes('Serbest Zaman')) return '🛋️';
            if (activity.includes('Uyku Hazırlığı')) return '🪥';
            if (activity.includes('Kitap Okuma')) return '📖';
            if (activity.includes('UYKU')) return '😴';
            if (activity.includes('Esnek Zaman')) return '⏳';
            if (activity.includes('Hobi')) return '🎨';
            if (activity.includes('Ekran Süresi')) return '📱';
            if (activity.includes('Haftaya Hazırlık')) return '🗓️';
            return '•';
        }

        document.addEventListener('DOMContentLoaded', () => {
            
            const planTitle = document.getElementById('plan-title');
            const planContainer = document.getElementById('plan-container');
            const planView = document.getElementById('plan-view');
            const fullWeekView = document.getElementById('full-week-view');
            const currentDayName = dayNames[new Date().getDay()];

            
            function showDay(dayName) {
                
                if (activeDayButton) {
                    activeDayButton.classList.remove('nav-btn-active');
                    activeDayButton.classList.add('nav-btn-inactive');
                }
                const currentButton = document.getElementById(`btn-${dayName}`);
                if (currentButton) {
                    currentButton.classList.add('nav-btn-active');
                    currentButton.classList.remove('nav-btn-inactive');
                    activeDayButton = currentButton;
                }

                
                planView.classList.remove('hidden');
                fullWeekView.classList.add('hidden');

                
                const dayData = scheduleData[dayName];
                planTitle.textContent = `${dayName} Planı`;
                planContainer.innerHTML = ''; 

                if (dayData) {
                    const list = document.createElement('ul');
                    list.className = 'space-y-3';
                    
                    dayData.forEach((item, index) => {
                        const listItem = document.createElement('li');
                        const bgColor = index % 2 === 0 ? 'bg-white' : 'bg-blue-50';
                        const icon = getActivityIcon(item.activity);
                        
                        listItem.className = `flex items-start p-3 ${bgColor} rounded-lg border-l-4 border-blue-500 gap-3`;
                        
                        listItem.innerHTML = `
                            <div class="w-6 text-xl pt-1">${icon}</div>
                            <div class="flex-1">
                                <strong class="font-medium text-blue-700 text-sm sm:text-base">${item.time.replace('22.00', '22.00+')}</strong>
                                <div class="text-slate-800 text-sm sm:text-base">${item.activity}</div>
                            </div>
                        `;
                        list.appendChild(listItem);
                    });
                    planContainer.appendChild(list);
                } else {
                    planContainer.textContent = 'Bu gün için plan bulunamadı.';
                }
            }

            
            function showFullWeek() {
                if (activeDayButton) {
                    activeDayButton.classList.remove('nav-btn-active');
                    activeDayButton.classList.add('nav-btn-inactive');
                }
                const fullWeekButton = document.getElementById('btn-FullWeek');
                fullWeekButton.classList.add('nav-btn-active');
                fullWeekButton.classList.remove('nav-btn-inactive');
                activeDayButton = fullWeekButton;

                planView.classList.add('hidden');
                fullWeekView.classList.remove('hidden');
            }
            
            
            function buildFullWeekTable() {
                const timeSlots = scheduleData['Pazartesi'].map(item => item.time);
                const days = ['Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi', 'Pazar'];
                const tbody = document.getElementById('full-week-tbody');
                tbody.innerHTML = '';

                timeSlots.forEach((time, index) => {
                    const tr = document.createElement('tr');
                    const bgColor = index % 2 === 0 ? 'bg-white' : 'bg-blue-50';
                    tr.className = bgColor;

                    days.forEach(day => {
                        const item = scheduleData[day][index];
                        const icon = getActivityIcon(item.activity);
                        const td = document.createElement('td');
                        td.className = 'px-3 py-2 whitespace-normal align-top';
                        
                        td.innerHTML = `
                            <div class="flex items-start gap-2">
                                <span class="text-lg pt-1">${icon}</span>
                                <div class="flex-1">
                                    <strong class="block text-xs font-medium text-blue-700">${item.time}</strong>
                                    <span>${item.activity}</span>
                                </div>
                            </div>
                        `;
                        tr.appendChild(td);
                    });
                    tbody.appendChild(tr);
                });
            }

            
            dayNames.forEach(day => {
                if (day !== "Pazar") { 
                    document.getElementById(`btn-${day}`).addEventListener('click', () => showDay(day));
                }
            });
            document.getElementById(`btn-Pazar`).addEventListener('click', () => showDay("Pazar"));
            document.getElementById('btn-FullWeek').addEventListener('click', showFullWeek);
            document.getElementById('print-schedule-btn').addEventListener('click', () => window.print());

            
            function updateCurrentActivity() {
                const now = new Date();
                const currentDay = dayNames[now.getDay()];
                const currentHours = now.getHours();
                const currentMinutes = now.getMinutes();
                const currentTime = currentHours + (currentMinutes / 100); 

                const daySchedule = scheduleData[currentDay];
                let currentIdx = -1;
                
                const startTime = (currentDay === "Cumartesi" || currentDay === "Pazar") ? 7.5 : 8.0;

                if (currentTime < startTime) {
                    currentIdx = daySchedule.length - 1; 
                } else {
                    for (let i = 0; i < daySchedule.length; i++) {
                        const item = daySchedule[i];
                        if (item.time === "22.00") {
                            if (currentTime >= 22.00) {
                                currentIdx = i;
                                break;
                            }
                        } else if (item.time.includes('-')) {
                            const [start, end] = item.time.split(' - ').map(t => parseFloat(t.replace('.', '.')));
                            if (currentTime >= start && currentTime < end) {
                                currentIdx = i;
                                break;
                            }
                        }
                    }
                    if (currentIdx === -1 && currentTime >= 22) {
                        currentIdx = daySchedule.length - 1;
                    }
                }
                
                let prevActivity = "--";
                let currentActivity = "UYKU";
                let nextActivity = "--";

                if (currentIdx !== -1) {
                    currentActivity = daySchedule[currentIdx].activity;
                    if (currentIdx > 0) {
                        prevActivity = daySchedule[currentIdx - 1].activity;
                    } else {
                        prevActivity = "UYKU";
                    }
                    if (currentIdx < daySchedule.length - 1) {
                        nextActivity = daySchedule[currentIdx + 1].activity;
                    } else {
                        nextActivity = "UYKU";
                    }
                } else {
                    currentActivity = "UYKU";
                    prevActivity = "Kitap Okuma"; 
                    nextActivity = daySchedule[0].activity; 
                }

                
                document.getElementById('prev-activity').textContent = `${getActivityIcon(prevActivity)} ${prevActivity}`;
                document.getElementById('current-activity').textContent = `${getActivityIcon(currentActivity)} ${currentActivity}`;
                document.getElementById('next-activity').textContent = `${getActivityIcon(nextActivity)} ${nextActivity}`;
            }

            
            const ctx = document.getElementById('time-allocation-chart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Uyku', 'Okul', 'Ders Çalışma', 'Kişisel & Sosyal Yaşam', 'Kitap Okuma'],
                    datasets: [{
                        label: 'Haftalık Saat',
                        data: [69, 33.3, 13.7, 48.5, 3.5], 
                        backgroundColor: [
                            '#3b82f6', 
                            '#10b981', 
                            '#f97616', 
                            '#eab308', 
                            '#6366f1'  
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    let value = context.raw || 0;
                                    let total = context.chart.getDatasetMeta(0).total;
                                    let percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} saat (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });

            
            buildFullWeekTable();
            showDay(currentDayName);
            updateCurrentActivity();
            setInterval(updateCurrentActivity, 60000); 

        });
    </script>
</body>
</html>
