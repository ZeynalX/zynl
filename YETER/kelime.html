<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sana Bir S√ºrprizim Var...</title>
    <style>
        /* FONT KORUNDU */
        @import url('https://fonts.cdnfonts.com/css/super-malibu');
        
        /* G√úNCELLENDƒ∞: TEMA (LAVANTA/MOR) */
        
        body {
            font-family: 'Super Malibu', sans-serif;
            background-color: #e6e0f7;  
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><path fill="%23d0c0f0" d="M50 0 C75 25 75 75 50 100 C25 75 25 25 50 0z" /><path fill="%23d0c0f0" d="M0 50 C25 25 75 25 100 50 C75 75 25 75 0 50z" /></svg>'); 
            background-size: 80px 80px;
            color: #4a2c3c;  
            text-align: center;
            padding: 20px;
            overflow-x: hidden; 
            line-height: 1.6; 
        }
        
        /* Mektup kutusu */
        .container {
            max-width: 650px;  
            margin: 40px auto;
            padding: 30px 40px;  
            background-color: #fffaf0; 
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);  
            position: relative;
            border: 2px solid #c0b0dd;  
            box-sizing: border-box; 
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAUVBMVEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUM+o4AAAACHRSTlMA/////////9kdXYcAAAASdEVYdFNvZnR3YXJlPUxpbmVhcml0eSBQYXR0ZXJucyBTdHVkaW9iZUy3hGAAAAAVSURBVDjLY2AYBGCAAhjECwIApAAGA3wL8/UAAAAASUVORK5CYII=');
            opacity: 0.05;
            pointer-events: none;
            border-radius: 15px;
        }

        .step { display: none; }
        .active { display: block; }

        h1 {
            font-family: 'Super Malibu', sans-serif;
            font-weight: normal; 
            color: #6a4a8c;  
            font-size: 2.8em; 
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .container p {
            font-family: 'Super Malibu', sans-serif;
            font-size: 1.3em; 
            margin-bottom: 15px;
            color: #5a3c4c; 
        }
        
        button {
            padding: 14px 30px;
            background-color: #9b7fbc;  
            color: #ffffff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px; /* Azaltƒ±ldƒ± */
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            font-size: 1.1em;  
            font-family: 'Super Malibu', sans-serif; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        button:hover {
            background-color: #8468a3; 
            transform: scale(1.03);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: scale(1);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* YETER harfleri ve kalp animasyonu */
        .heart {
            position: fixed;
            top: -10vh;
            left: 50%;
            font-size: 2.5rem;  
            animation: fall 5s linear forwards;
            opacity: 0.9;
            font-weight: bold;
            color: #b388dd; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            z-index: 1000; 
        }
        @keyframes fall {
            to { transform: translateY(105vh) rotate(360deg); opacity: 0; }
        }
        
        /* Vƒ∞DEO IFRAME STƒ∞Lƒ∞ */
        #video-player-iframe {
            width: 100%; 
            max-width: 560px; 
            height: 315px; 
            margin-top: 30px;  
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #d4a7b7;
        }

        /* √ái√ßek s√ºslemeleri */
        .decoration-top-left, .decoration-top-right,
        .decoration-bottom-left, .decoration-bottom-right {
            position: absolute;
            font-size: 2.5em;
            opacity: 0.8;
            pointer-events: none;
            color: #b388dd; 
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .decoration-top-left { top: 15px; left: 15px; transform: rotate(-15deg); }
        .decoration-top-right { top: 15px; right: 15px; transform: rotate(15deg); }
        .decoration-bottom-left { bottom: 15px; left: 15px; transform: rotate(15deg); }
        .decoration-bottom-right { bottom: 15px; right: 15px; transform: rotate(-15deg); }

        /* ƒ∞mza */
        .signature {
            font-family: 'Super Malibu', sans-serif;
            font-style: normal; 
            font-size: 1.8em; 
            margin-top: 30px;
            color: #6a4a8c; 
            text-align: right;
            padding-right: 20px;
        }

        /* --- YENƒ∞: KELƒ∞ME OYUNU STƒ∞LLERƒ∞ --- */
        
        #game-stats {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #fdf6f8;
            border: 1px dashed #d4a7b7;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 20px;
            font-family: 'Helvetica', sans-serif; /* Okunaklƒ± font */
        }
        #game-stats div {
            font-size: 1.2em;
            color: #6a4a8c;
            font-weight: bold;
        }
        #game-stats span {
            font-size: 1.5em;
            color: #333;
            display: block;
            font-weight: 900;
        }
        #main-timer { color: #b33951; } /* Ana s√ºre kƒ±rmƒ±zƒ± */

        #question-hint {
            font-size: 1.1em;
            color: #7a5c6c; 
            font-style: italic;
            margin: 15px auto;
            padding: 10px 15px;
            background-color: #fdf6f8; 
            border: 1px dashed #d4a7b7;
            border-radius: 8px;
            max-width: 90%;
            line-height: 1.5;
            min-height: 3em; /* ƒ∞pucu y√ºksekliƒüi */
        }
        
        #word-display {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 25px 0;
            flex-wrap: wrap; /* Uzun kelimeler i√ßin */
        }
        
        .letter-box {
            width: 50px;
            height: 50px;
            border: 2px solid #c0b0dd;
            border-radius: 5px;
            background-color: #fcf6f8;
            font-size: 2em; 
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a2c3c;
            font-family: sans-serif; 
            transition: all 0.3s ease;
        }
        /* D√úZELTME: Bƒ∞NAENALEYH (11 harf) i√ßin kutularƒ± k√º√ß√ºlt */
        .word-length-11 .letter-box {
            width: 40px;
            height: 40px;
            font-size: 1.5em;
        }
        
        .letter-box.revealed {
            background-color: #fffaf0;
            border-color: #9b7fbc;
            transform: scale(1.05);
        }

        #controls-area {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        #guess-area {
            margin-top: 20px;
            padding: 15px;
            background-color: #fdf6f8;
            border: 1px solid #d4a7b7;
            border-radius: 8px;
        }
        
        #guess-timer {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            color: #b33951;
            margin-bottom: 10px;
        }
        
        #guess-input {
            padding: 12px;
            width: 80%;
            max-width: 300px; 
            border-radius: 8px;
            border: 1px solid #d4a7b7;
            background-color: #fcf6f8;
            color: #4a2c3c;
            margin-bottom: 10px;
            font-size: 1.2em; 
            font-family: 'Helvetica', sans-serif; /* Okunaklƒ± font */
            text-transform: uppercase; 
            text-align: center;
        }
        
        #guess-feedback {
            font-family: 'Helvetica', sans-serif;
            font-weight: bold;
            min-height: 1.2em;
            margin-top: 10px;
        }
        .feedback-correct { color: #28a745; }
        .feedback-wrong { color: #dc3545; }

        #final-score-summary {
            font-family: 'Helvetica', sans-serif;
            font-size: 1.5em;
            font-weight: bold;
            color: #6a4a8c;
            margin: 30px 0;
        }
        
    </style>
</head>
<body>

    <div id="step-1" class="container step active">
        <div class="decoration-top-left">üåπ</div>
        <div class="decoration-top-right">üå∏</div>
        
        <h1>Kelime Oyunu</h1>
        
        <div id="game-stats">
            <div>Ana S√ºre
                <span id="main-timer">03:00</span>
            </div>
            <div>Puan
                <span id="game-score">0</span>
            </div>
        </div>
        
        <div id="question-hint">ƒ∞pucu y√ºkleniyor...</div>
        
        <div id="word-display">
            </div>
        
        <div id="controls-area">
            <button id="btn-get-letter">Harf Al</button>
            <button id="btn-make-guess">Tahmin Et</button>
        </div>
        
        <div id="guess-area" style="display: none;">
            <div id="guess-timer">Kalan Tahmin S√ºresi: 01:00</div>
            <input type="text" id="guess-input" placeholder="Tahmininizi Yazƒ±n...">
            <br>
            <button id="btn-submit-guess">Onayla</button>
            <div id="guess-feedback"></div>
        </div>
        
        <div id="final-score-summary" style="display: none;">
            Oyun Bitti! Toplam Puanƒ±nƒ±z: 0
        </div>

    </div>

    <div id="step-3" class="container step">
        <div class="decoration-top-left">üåπ‚ù§Ô∏è</div>
        <div class="decoration-top-right">üíñüå∏</div>
        <div class="decoration-bottom-left">üå∑üíï</div>
        <div class="decoration-bottom-right">üíìüåº</div>

        <p>Seviyorum seni ekmeƒüi tuza banƒ±p</p>
        <p>Banƒ±p yer gibi</p>
        <p>Geceleri ate≈üler i√ßinde uyanarak</p>
        <p>Aƒüzƒ±mƒ± dayayƒ±p musluƒüa</p>
        <p>Su i√ßer gibi</p>
        <p>Ne zaman seni d√º≈ü√ºnsem</p>
        <p>Bir ceylan su i√ßmeye iner √ßayƒ±rlarƒ±</p>
        <p>B√ºy√ºrken b√ºy√ºrken g√∂r√ºr√ºm g√ºl√ºm</p>
        <p>Her sabah her ak≈üam seninle</p>
        <p>Ye≈üil bir zeytin tanesi</p>
        <p>Bir par√ßa mavi deniz alƒ±r beni</p>
        <p>Seni d√º≈ü√ºnd√ºk√ße g√ºl dikiyorum</p>
        <p>Ellerimin deƒüdiƒüi yere..</p>
        
        <div class="signature">
            - Senin Canƒ±n
        </div>

        <iframe 
            id="video-player-iframe" 
            src="https://www.youtube.com/embed/m19V4G89ln4" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
            allowfullscreen>
        </iframe>
    </div>


    <script>
        // --- D√úZELTƒ∞LMƒ∞≈û SORU Lƒ∞STESƒ∞ ---
        const questions = [
            { word: "≈ûAYET", hint: "bir ihtimalin ger√ßekle≈ümesini ba≈üka bir ≈üeye baƒülar." },
            { word: "HAKEZA", hint: "Az √∂nce s√∂ylenen ≈üeyin bir 'benzerinin' daha olduƒüu." },
            { word: "Bƒ∞NAENALEYH", hint: "Asƒ±l i≈üi bir √∂nceki c√ºmleyi 'sonuca' baƒülamaktƒ±r." }
        ];

        // --- Oyun Deƒüi≈ükenleri ---
        let currentQuestionIndex = 0;
        let totalScore = 0;
        let mainTimer = 180; // 3 Dakika
        let guessTimer = 60; // 1 Dakika
        let mainTimerInterval = null;
        let guessTimerInterval = null;
        let revealedLetters = []; // [true, false, false, true, false] (true = harf alƒ±ndƒ±)
        let isGuessingPhase = false;

        // --- HTML Elementleri ---
        const mainTimerEl = document.getElementById('main-timer');
        const gameScoreEl = document.getElementById('game-score');
        const questionHintEl = document.getElementById('question-hint');
        const wordDisplayEl = document.getElementById('word-display');
        const btnGetLetter = document.getElementById('btn-get-letter');
        const btnMakeGuess = document.getElementById('btn-make-guess');
        const guessAreaEl = document.getElementById('guess-area');
        const guessTimerEl = document.getElementById('guess-timer');
        const guessInputEl = document.getElementById('guess-input');
        const btnSubmitGuess = document.getElementById('btn-submit-guess');
        const guessFeedbackEl = document.getElementById('guess-feedback');
        const finalScoreSummaryEl = document.getElementById('final-score-summary');

        // --- Zamanlayƒ±cƒ± Formatlama ---
        function formatTime(seconds) {
            const min = Math.floor(seconds / 60).toString().padStart(2, '0');
            const sec = (seconds % 60).toString().padStart(2, '0');
            return `${min}:${sec}`;
        }

        // --- Ana Oyunu Ba≈ülatma ---
        function initGame() {
            currentQuestionIndex = 0;
            totalScore = 0;
            mainTimer = 180;
            isGuessingPhase = false;
            
            gameScoreEl.textContent = totalScore;
            mainTimerEl.textContent = formatTime(mainTimer);
            
            loadQuestion(currentQuestionIndex);
            startMainTimer();

            // Buton Olaylarƒ±
            btnGetLetter.onclick = handleGetLetter;
            btnMakeGuess.onclick = handleMakeGuess;
            btnSubmitGuess.onclick = handleSubmitGuess;
            
            // Enter tu≈üu ile tahmin onayƒ±
            guessInputEl.addEventListener('keyup', function(event) {
                if (event.key === 'Enter' && isGuessingPhase) {
                    handleSubmitGuess();
                }
            });
        }

        // --- Soru Y√ºkleme ---
        function loadQuestion(index) {
            if (index >= questions.length) {
                endGame(true); // T√ºm sorular bitti
                return;
            }

            const question = questions[index];
            questionHintEl.textContent = question.hint;
            
            // Harf kutularƒ±nƒ± olu≈ütur
            wordDisplayEl.innerHTML = '';
            revealedLetters = [];
            
            // D√úZELTME: Uzun kelimeler i√ßin CSS sƒ±nƒ±fƒ± ekle
            if (question.word.length > 8) {
                wordDisplayEl.className = 'word-length-11';
            } else {
                wordDisplayEl.className = '';
            }

            for (let i = 0; i < question.word.length; i++) {
                wordDisplayEl.innerHTML += `<div class="letter-box" data-index="${i}">_</div>`;
                revealedLetters.push(false); // Ba≈ülangƒ±√ßta hi√ß harf alƒ±nmadƒ±
            }
            
            // Aray√ºz√º sƒ±fƒ±rla
            guessAreaEl.style.display = 'none';
            btnGetLetter.disabled = false;
            btnMakeGuess.disabled = false;
            isGuessingPhase = false;
        }

        // --- Ana S√ºre√ß ---
        function startMainTimer() {
            if (mainTimerInterval) clearInterval(mainTimerInterval);
            mainTimerInterval = setInterval(() => {
                mainTimer--;
                mainTimerEl.textContent = formatTime(mainTimer);
                if (mainTimer <= 0) {
                    endGame(false); // Ana s√ºre doldu
                }
            }, 1000);
        }

        function pauseMainTimer() {
            if (mainTimerInterval) clearInterval(mainTimerInterval);
        }

        // --- Oynanƒ±≈ü Fonksiyonlarƒ± ---

        function handleGetLetter() {
            const question = questions[currentQuestionIndex];
            const unrevealedIndices = [];
            
            // Alƒ±nmamƒ±≈ü harflerin indeksini bul
            for (let i = 0; i < question.word.length; i++) {
                if (revealedLetters[i] === false) {
                    unrevealedIndices.push(i);
                }
            }

            if (unrevealedIndices.length === 0) {
                btnGetLetter.disabled = true;
                return; // A√ßƒ±lacak harf kalmadƒ±
            }

            // Rastgele bir harf se√ß
            const randomIndex = unrevealedIndices[Math.floor(Math.random() * unrevealedIndices.length)];
            revealedLetters[randomIndex] = true; // Bu harf "Harf Al" ile a√ßƒ±ldƒ±
            
            // Kutuyu g√ºncelle
            const box = wordDisplayEl.querySelector(`.letter-box[data-index="${randomIndex}"]`);
            box.textContent = question.word[randomIndex];
            box.classList.add('revealed');
            
             // T√ºm harfler a√ßƒ±ldƒ±ysa, otomatik sonraki soru
            if (unrevealedIndices.length === 1) { 
                btnGetLetter.disabled = true;
                setTimeout(() => {
                    // Puan verilmez, sadece sonraki soruya ge√ßilir
                    handleGuessResult(false, true); 
                }, 1000);
            }
        }

        function handleMakeGuess() {
            isGuessingPhase = true;
            pauseMainTimer();
            
            btnGetLetter.disabled = true;
            btnMakeGuess.disabled = true;
            
            guessAreaEl.style.display = 'block';
            guessInputEl.value = '';
            guessInputEl.focus();
            guessFeedbackEl.textContent = '';
            
            startGuessTimer();
        }

        function startGuessTimer() {
            guessTimer = 60; // 1 Dakika
            guessTimerEl.textContent = `Kalan Tahmin S√ºresi: 0${formatTime(guessTimer)}`;
            
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            guessTimerInterval = setInterval(() => {
                guessTimer--;
                guessTimerEl.textContent = `Kalan Tahmin S√ºresi: 0${formatTime(guessTimer)}`;
                if (guessTimer <= 0) {
                    handleGuessResult(false, false); // Tahmin s√ºresi doldu
                }
            }, 1000);
        }

        function handleSubmitGuess() {
            if (guessTimer <= 0) return; // S√ºre dolduysa i≈ülem yapma

            const guess = guessInputEl.value.toLocaleUpperCase('tr-TR').trim();
            const correctWord = questions[currentQuestionIndex].word;

            if (guess === correctWord) {
                handleGuessResult(true, false); // Doƒüru tahmin
            } else {
                // Yanlƒ±≈ü tahmin
                totalScore -= 10;
                gameScoreEl.textContent = totalScore;
                guessFeedbackEl.textContent = "Yanlƒ±≈ü! (-10 Puan)";
                guessFeedbackEl.className = "feedback-wrong";
            }
        }

        // --- Sonu√ß ve Ge√ßi≈ü ---
        
        // isCorrect: Tahmin doƒüru mu?
        // isAutoAdvance: Harflerin hepsi alƒ±ndƒ±ƒüƒ± i√ßin mi ge√ßiyor?
        function handleGuessResult(isCorrect, isAutoAdvance) {
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            isGuessingPhase = false;
            
            if (isCorrect) {
                // Puan hesapla (SADECE alƒ±nmayan harfler i√ßin)
                let pointsEarned = 0;
                for (let i = 0; i < revealedLetters.length; i++) {
                    if (revealedLetters[i] === false) {
                        pointsEarned += 10;
                    }
                }
                totalScore += pointsEarned;
                gameScoreEl.textContent = totalScore;
                
                // T√ºm kutularƒ± a√ß
                const boxes = wordDisplayEl.querySelectorAll('.letter-box');
                const word = questions[currentQuestionIndex].word;
                boxes.forEach((box, i) => {
                    box.textContent = word[i];
                    box.classList.add('revealed');
                });
            }
            
            if (!isAutoAdvance) {
                // 1.5 saniye bekle sonra diƒüer soruya ge√ß
                setTimeout(() => {
                    currentQuestionIndex++;
                    loadQuestion(currentQuestionIndex);
                    if (mainTimer > 0) startMainTimer(); // Ana s√ºreyi devam ettir
                }, 1500);
            } else {
                 // Harfler bittiyse beklemeden ge√ß
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
                if (mainTimer > 0) startMainTimer();
            }
        }

        // --- Oyun Biti≈üi ---
        function endGame(isFinished) { // isFinished = Sorular bitti mi, yoksa s√ºre mi?
            pauseMainTimer();
            if (guessTimerInterval) clearInterval(guessTimerInterval);
            
            // T√ºm oyun aray√ºz√ºn√º gizle
            questionHintEl.style.display = 'none';
            wordDisplayEl.style.display = 'none';
            document.getElementById('controls-area').style.display = 'none';
            guessAreaEl.style.display = 'none';
            document.getElementById('game-stats').style.display = 'none';
            
            // Final skorunu g√∂ster
            finalScoreSummaryEl.textContent = `Oyun Bitti! Toplam Puanƒ±nƒ±z: ${totalScore}`;
            finalScoreSummaryEl.style.display = 'block';

            // 3 saniye sonra s√ºrpriz b√∂l√ºm√ºn√º g√∂ster
            setTimeout(() => {
                showFinalStep(); // Step-3'√º (≈üiir/video) g√∂ster
            }, 3000);
        }

        // --- ESKƒ∞ KODLAR (Step-3 i√ßin gerekli) ---

        // Aktif adƒ±mƒ± g√∂steren fonksiyon
        function showStep(stepId) {
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById(stepId).classList.add('active');
        }

        // Final adƒ±mƒ±nƒ± g√∂ster ve kalpleri/harfleri ba≈ülat
        function showFinalStep() {
            showStep('step-3'); // Adƒ±m 3'√º (Mektup) g√∂ster
            setInterval(createHeart, 200);
        }

        // Kalp/Harf olu≈üturma fonksiyonu
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
            heart.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
            
            const heartIcons = ['‚ù§Ô∏è', 'Y', 'üíó', 'E', 'üíì','T', 'üíñ', 'E', 'üíï', 'R'];
            heart.innerText = heartIcons[Math.floor(Math.random() * heartIcons.length)];
            
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 5000);
        }
        
        // --- OYUNU BA≈ûLAT ---
        initGame();
        
    </script>

</body>
</html>
